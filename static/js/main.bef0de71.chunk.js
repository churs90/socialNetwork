(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{129:function(e,t,a){e.exports=a.p+"static/media/user.9775c4b8.jpg"},130:function(e,t,a){e.exports=a.p+"static/media/preloader.a6486ffc.gif"},131:function(e,t,a){e.exports={preloader:"Preloader_preloader__VgWKi"}},132:function(e,t,a){},133:function(e,t,a){e.exports={post:"Post_post__38hj1"}},134:function(e,t,a){e.exports={logo:"Logo_logo__o4xKV"}},135:function(e,t,a){e.exports=a.p+"static/media/logo-mortal-kombat.d178c0d9.png"},136:function(e,t,a){e.exports={headerTitle:"HeaderTitle_headerTitle__2zUcK"}},163:function(e,t,a){e.exports=a(288)},168:function(e,t,a){},28:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__FEtYZ",dialog:"Dialogs_dialog__3JMOC",dialogsItem:"Dialogs_dialogsItem__AJAKn",messages:"Dialogs_messages__33qXT",message:"Dialogs_message__315SI"}},288:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(61),i=a.n(o),s=(a(168),a(22)),l=a(23),c=a(25),u=a(26),m=a(66),p=a.n(m),d=a(52),f=a.n(d),g=a(10),h=a(67),E=a.n(h),b=function(e){return r.a.createElement("div",{className:E.a.friends},r.a.createElement("img",{src:e.ava,alt:""}),r.a.createElement("p",null,e.name))},v=function(e){return r.a.createElement("div",{className:E.a.friendsBlock},r.a.createElement(g.b,{to:"/friends"},"Friends"),r.a.createElement("div",{className:E.a.wrapperFriends},r.a.createElement(b,{name:e.friendsData[0].name,ava:e.friendsData[0].ava}),r.a.createElement(b,{name:e.friendsData[1].name,ava:e.friendsData[1].ava}),r.a.createElement(b,{name:e.friendsData[2].name,ava:e.friendsData[2].ava})))},P=function(e){return r.a.createElement("nav",{className:f.a.sidebar},r.a.createElement("div",null,r.a.createElement(g.b,{to:"/profile",activeClassName:f.a.activeLink},"Profile")),r.a.createElement("div",null,r.a.createElement(g.b,{to:"/dialogs",activeClassName:f.a.activeLink},"Messages")),r.a.createElement("div",null,r.a.createElement(g.b,{to:"/users",activeClassName:f.a.activeLink},"Users")),r.a.createElement("div",null,r.a.createElement("a",null,"News")),r.a.createElement("div",null,r.a.createElement("a",null,"Music")),r.a.createElement("div",null,r.a.createElement("a",null,"Settings")),r.a.createElement(v,{friendsData:e.stateSidebarPage.friendsData}))},O=a(9),_=a(33),w=a(7),S={dialogsData:[{name:"Vadim",id:1,ava:"https://c7.hotpng.com/preview/549/388/33/shrek-the-third-donkey-princess-fiona-gingerbread-man-t-shirt-shrek.jpg"},{name:"Sveta",id:2,ava:"https://i.pinimg.com/736x/03/a9/c3/03a9c377e1fd89b539ab5cd7539f1f89--tangled-dress-tangled-cosplay.jpg"},{name:"Alex",id:3,ava:"https://vignette.wikia.nocookie.net/tekken/images/0/07/Bob-t6br.jpg/revision/latest?cb=20120810084348&path-prefix=ru"},{name:"Mike",id:4,ava:"https://2000culture.com/images2/kakviglyadelibivsepersonazhiiznarutovrea_EB1636C8.jpg"},{name:"Jhon",id:5,ava:"https://www.facenews.ua/media/contentimages/72e5b8273c297356.jpg"}],messagesData:[{id:1,message:"hello"},{id:2,message:"xxxxxxxxxxxxxxxxxxxxxx"},{id:3,message:"qqqqqqqqqqqqqqqqqqqqqq"}],messageBody:""},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON-SEND-MESSAGE":var a={message:e.messageBody};return Object(w.a)({},e,{messagesData:[].concat(Object(_.a)(e.messagesData),[a]),messageBody:""});case"ON-CHANGE-MESSAGE-BODY":return Object(w.a)({},e,{messageBody:t.newMessageBody});default:return e}},k=a(28),y=a.n(k),N=function(e){var t="/dialogs/"+e.id;return r.a.createElement("div",{className:y.a.dialog},r.a.createElement(g.b,{to:t},r.a.createElement("img",{src:e.ava,alt:""}),e.name))},x=function(e){return r.a.createElement("div",{className:y.a.message},e.message)},C=a(125),A=a(124),D=function(e){if(!e)return"Field is required"},T=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},I=a(93),U=a(34),F=a.n(U),M=function(e){var t=e.input,a=e.meta,n=Object(I.a)(e,["input","meta"]),o=a.error&&a.touched?"errorTextarea":"";return r.a.createElement("div",null,r.a.createElement("textarea",Object.assign({className:F.a[o]},t,n)),r.a.createElement("div",null,a.error&&a.touched&&r.a.createElement("span",{className:F.a.errorInput},a.error)))},L=function(e){var t=e.input,a=e.meta,n=Object(I.a)(e,["input","meta"]),o=a.error&&a.touched?"errorTextarea":"";return r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:F.a[o]},t,n)),r.a.createElement("div",null,a.error&&a.touched&&r.a.createElement("span",{className:F.a.errorInput},a.error)))},R=T(10),q=function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(A.a,{component:M,name:e.name,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",validate:[D,R]}),r.a.createElement("button",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"))},B=function(e){var t=e.dialogPage.dialogsData.map((function(e){return r.a.createElement(N,{key:e.id,name:e.name,id:e.id,ava:e.ava})})),a=e.dialogPage.messagesData.map((function(e){return r.a.createElement(x,{key:e.id,message:e.message})})),n=Object(C.a)({form:"dialog"})(q);return r.a.createElement("div",{className:y.a.dialogs},r.a.createElement("div",{className:y.a.dialogsItem},t),r.a.createElement("div",{className:y.a.messages},a,r.a.createElement("div",null,r.a.createElement(n,{onSubmit:function(e){alert(e.dialogField)},name:"dialogField",maxLengthValue:30}))))},G=a(8),H=a(6),z=function(e){return{isAuth:e.auth.isAuth}},J=function(e){return Object(G.b)(z)((function(t){return t.isAuth?r.a.createElement(e,t):r.a.createElement(O.a,{to:"/login"})}))},W=Object(H.d)(Object(G.b)((function(e){return{dialogPage:e.dialogPage}}),(function(e){return{onChangeMessageBody:function(t){e({newMessageBody:t,type:"ON-CHANGE-MESSAGE-BODY"})},onSendMessage:function(){e({type:"ON-SEND-MESSAGE"})}}})),J)(B),V=a(51),K=a(35),X=a.n(K),Y=a(63),Z=a(129),Q=a.n(Z),$=Y.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"90ce7324-286f-412d-a2b5-0732b3cf100d"}}),ee=function(e,t){return $.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},te=function(e){return $.post("follow/".concat(e)).then((function(e){return e.data}))},ae=function(e){return $.delete("follow/".concat(e)).then((function(e){return e.data}))},ne=function(){return $.get("auth/me").then((function(e){return e.data}))},re=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return $.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}).then((function(e){return e.data}))},oe=function(){return $.delete("auth/login").then((function(e){return e.data}))},ie=function(e){return $.get("profile/".concat(e)).then((function(e){return e.data}))},se=function(e){return $.put("profile",e).then((function(e){return e.data}))},le=function(e){return $.get("profile/status/".concat(e)).then((function(e){return e.data}))},ce=function(e){return $.put("profile/status",{status:e}).then((function(e){return e.data}))},ue=function(e){var t=new FormData;return t.append("image",e),$.put("profile/photo",t,{headers:{"Content-type":"multipart/form-data"}})},me=function(){return $.get("security/get-captcha-url").then((function(e){return e.data}))},pe={users:[],totalCount:0,pageSize:35,currentPage:1,isFetching:!1,followingProgress:[]},de=function(e){return{type:"SET-USERS",users:e}},fe=function(e){return{type:"IS-FETCHING",isFetching:e}},ge=function(e,t){return{type:"FOLLOWING-PROGRESS",followingProgressIsFetching:e,userId:t}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(w.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(w.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(w.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(w.a)({},e,{followed:!1}):e}))});case"SET-USERS":return Object(w.a)({},e,{users:Object(_.a)(t.users)});case"SET-TOTAL-USERS-COUNTS":return Object(w.a)({},e,{totalCount:t.totalUsersCounts});case"CHANGE-CURRENT-PAGE":return Object(w.a)({},e,{currentPage:t.newCurrentPage});case"IS-FETCHING":return Object(w.a)({},e,{isFetching:t.isFetching});case"FOLLOWING-PROGRESS":return Object(w.a)({},e,{followingProgress:t.followingProgressIsFetching?[].concat(Object(_.a)(e.followingProgress),[t.userId]):e.followingProgress.filter((function(e){return e!=t.userId}))});default:return e}},Ee=function(e){for(var t=10*(e.portionNumber-1)+1,a=[],n=Math.ceil(e.usersPage.totalCount/e.usersPage.pageSize),o=Math.ceil(n/10),i=10*e.portionNumber,s=1;s<=n;s++)a.push(s);var l=a.filter((function(e){return e>=t&&e<=i})).map((function(t){return r.a.createElement("span",{onClick:function(){return e.changeCurrentPage(t)},className:e.usersPage.currentPage===t?X.a.selectedPage:""},t," ")}));return r.a.createElement("div",null,t>1&&r.a.createElement("button",{onClick:function(){e.changePortionNumber(e.portionNumber-1)}},"prev"),l,o>e.portionNumber&&r.a.createElement("button",{onClick:function(){e.changePortionNumber(e.portionNumber+1)}},"next"))},be=function(e){var t=Object(n.useState)(1),a=Object(V.a)(t,2),o=a[0],i=a[1],s=function(e){i(e)},l=e.usersPage.users.map((function(t){return r.a.createElement("div",{className:X.a.usersWrapper},r.a.createElement("div",{className:X.a.avaBlock},r.a.createElement("div",{className:X.a.ava},r.a.createElement(g.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:t.photos.small?t.photos.small:Q.a,alt:""}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:e.usersPage.followingProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollow(t.id)}},"unFollow"):r.a.createElement("button",{disabled:e.usersPage.followingProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)}},"follow"))),r.a.createElement("div",{className:X.a.discriptionBlock},r.a.createElement("div",null,r.a.createElement("p",null,t.name),r.a.createElement("p",{className:X.a.status},t.status)),r.a.createElement("div",null,r.a.createElement("p",null,"id: ",t.id),r.a.createElement("p",null))))}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Users"),r.a.createElement(Ee,Object.assign({},e,{portionNumber:o,changePortionNumber:s})),l,r.a.createElement(Ee,Object.assign({},e,{portionNumber:o,changePortionNumber:s})))},ve=a(130),Pe=a.n(ve),Oe=a(131),_e=a.n(Oe),we=function(){return r.a.createElement("div",{className:_e.a.preloader},r.a.createElement("img",{src:Pe.a,alt:""}))},Se=function(e){return e.usersPage},je=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).changeCurrentPage=function(t){e.props.changeCurrentPage(e.props.usersPage.pageSize,t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.usersPage.pageSize,this.props.usersPage.currentPage)}},{key:"componentDidUpdate",value:function(e,t,a){this.props===e&&this.props.getUsers(this.props.usersPage.pageSize,this.props.usersPage.currentPage)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.usersPage.isFetching&&r.a.createElement(we,null),r.a.createElement(be,{usersPage:this.props.usersPage,follow:this.props.follow,unFollow:this.props.unFollow,changeCurrentPage:this.changeCurrentPage}))}}]),a}(r.a.Component),ke=Object(H.d)(Object(G.b)((function(e){return{usersPage:Se(e)}}),{follow:function(e){return function(t){t(ge(!0,e)),t(fe(!0)),te(e).then((function(a){0===a.resultCode&&(t(function(e){return{type:"FOLLOW",userId:e}}(e)),t(ge(!1,e)),t(fe(!1)))}))}},unFollow:function(e){return function(t){t(ge(!0,e)),t(fe(!0)),ae(e).then((function(a){0===a.resultCode&&(t(function(e){return{type:"UNFOLLOW",userId:e}}(e)),t(ge(!1,e)),t(fe(!1)))}))}},changeCurrentPage:function(e,t){return function(a){a(fe(!0)),a({type:"CHANGE-CURRENT-PAGE",newCurrentPage:t}),ee(e,t).then((function(e){a(de(e.items)),a(fe(!1))}))}},getUsers:function(e,t){return function(a){a(fe(!0)),ee(e,t).then((function(e){a(de(e.items)),a({type:"SET-TOTAL-USERS-COUNTS",totalUsersCounts:e.totalCount}),a(fe(!1))}))}}}))(je),ye=a(85),Ne=a.n(ye),xe=a(36),Ce=a.n(xe),Ae=function(e){var t=Object(n.useState)(!1),a=Object(V.a)(t,2),o=a[0],i=a[1],s=Object(n.useState)(e.status),l=Object(V.a)(s,2),c=l[0],u=l[1];Object(n.useEffect)((function(){u(e.status)}),[e.status]);var m=function(t){i(t),t||e.updateStatus(c)};return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement("div",null,r.a.createElement("b",null,"Status:"),r.a.createElement("input",{autoFocus:!0,onBlur:function(){return m(!1)},type:"text",value:c,onChange:function(e){u(e.target.value)}})),!o&&r.a.createElement("div",null,r.a.createElement("b",null,"Status:"),r.a.createElement("span",{onDoubleClick:e.isOwner?function(){return m(!0)}:null}," ",e.status||"---------")))},De=Object(C.a)({form:"edit-profile"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},e.error&&r.a.createElement("div",{className:Ce.a.errorForm},e.error),r.a.createElement("div",null,r.a.createElement("b",null,"fullName:")," ",r.a.createElement(A.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",type:"text",component:L,name:"fullName"})),r.a.createElement("div",null,r.a.createElement("b",null,"lookingForAJob:")," ",r.a.createElement(A.a,{type:"checkbox",component:L,name:"lookingForAJob"})),r.a.createElement("div",null,r.a.createElement("b",null,"lookingForAJobDescription:")," ",r.a.createElement(A.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0438 \u0441\u043a\u0438\u043b\u044b",type:"text",component:M,name:"lookingForAJobDescription"})),r.a.createElement("div",null,r.a.createElement("b",null,"AboutME:")," ",r.a.createElement(A.a,{placeholder:"\u041f\u043e\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0441\u0435\u0431\u0435",type:"text",component:M,name:"aboutMe"})),r.a.createElement("div",null,"Contacts: ",Object.keys(e.userProfile.contacts).map((function(e){return r.a.createElement("div",{key:e,className:Ce.a.contact},r.a.createElement("b",null,e,":")," ",r.a.createElement(A.a,{placeholder:e,type:"text",component:L,name:"contacts."+e}))}))),r.a.createElement("div",null,r.a.createElement("button",null,"Save")))})),Te=function(e){return r.a.createElement("div",null,e.isOwner&&r.a.createElement("button",{onClick:function(){e.onChangeEditMode(!0)}},"Change Profile"),r.a.createElement("div",null,r.a.createElement("b",null,"fullName:")," ",e.userProfile.fullName),r.a.createElement("div",null,r.a.createElement("b",null,"lookingForAJob:")," ",e.userProfile.lookingForAJob?"Yes":"No"),e.userProfile.lookingForAJob&&r.a.createElement("div",null,r.a.createElement("b",null,"lookingForAJobDescription:")," ",e.userProfile.lookingForAJobDescription),r.a.createElement("div",null,r.a.createElement("b",null,"AboutME:")," ",e.userProfile.aboutMe),r.a.createElement("div",null,"Contacts: ",Object.keys(e.userProfile.contacts).map((function(t){return r.a.createElement(Ie,{key:t,contactTitle:t,contactValue:e.userProfile.contacts[t]})}))))},Ie=function(e){var t=e.contactTitle,a=e.contactValue;return r.a.createElement("div",{className:Ce.a.contact},r.a.createElement("b",null,t,":")," ",r.a.createElement("a",{href:a},a))},Ue=function(e){if(!e.profilePage.userProfile)return r.a.createElement(we,null);return r.a.createElement("div",{className:Ce.a.profileInfo},r.a.createElement("div",null,r.a.createElement("div",{className:Ce.a.avatar},r.a.createElement("img",{src:e.profilePage.userProfile.photos.large?e.profilePage.userProfile.photos.large:"https://i.ya-webdesign.com/images/user-avatar-png-7.png",alt:""})),e.isOwner&&r.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.updatePhoto(t.target.files[0])}}),r.a.createElement(Ae,{status:e.profilePage.status,updateStatus:e.updateStatus,isOwner:e.isOwner})),r.a.createElement("div",{className:Ce.a.dopInfo},e.editMode?r.a.createElement(De,{initialValues:e.profilePage.userProfile,userProfile:e.profilePage.userProfile,onSubmit:function(t){e.updateUserProfile(t).then((function(){e.onChangeEditMode(!1)}))}}):r.a.createElement(Te,{userProfile:e.profilePage.userProfile,onChangeEditMode:e.onChangeEditMode,isOwner:e.isOwner})))},Fe=a(14),Me=a.n(Fe),Le=a(29),Re=a(16),qe={postsData:[{id:1,message:"How are you?",like:12},{id:2,message:"Where are you from?",like:18},{id:3,message:"Where are you from?",like:23},{id:4,message:"Where are you from?",like:11},{id:5,message:"How are you?",like:122}],postText:"",userProfile:null,status:""},Be=function(e){return function(t){ie(e).then((function(e){t({type:"SET-USER-PROFILE",userProfile:e})}))}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={message:e.postText,like:13};return Object(w.a)({},e,{postsData:[].concat(Object(_.a)(e.postsData),[a]),postText:""});case"ON-CHANGE-POST-TEXT":return Object(w.a)({},e,{postText:t.newText});case"SET-USER-PROFILE":return Object(w.a)({},e,{userProfile:t.userProfile});case"SET-STATUS":case"UPDATE-STATUS":return Object(w.a)({},e,{status:t.status});default:return e}},He=a(132),ze=a.n(He),Je=a(133),We=a.n(Je),Ve=function(e){return e.userProfile?r.a.createElement("div",{className:We.a.post},r.a.createElement("img",{src:e.userProfile.photos.small?e.userProfile.photos.small:"https://i.ya-webdesign.com/images/user-avatar-png-7.png",alt:""}),r.a.createElement("span",null,e.message),r.a.createElement("br",null),r.a.createElement("span",null," like ",e.like)):r.a.createElement(we,null)},Ke=Object(C.a)({form:"postForm"})(q),Xe=function(e){var t=e.profilePage.postsData.map((function(t){return r.a.createElement(Ve,{key:t.id,message:t.message,like:t.like,userProfile:e.profilePage.userProfile})}));return r.a.createElement("div",{className:ze.a.content},"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b",r.a.createElement("div",{className:"newPost"},r.a.createElement(Ke,{onSubmit:function(e){alert(e.postField)},name:"postField",maxLengthValue:10})),t)},Ye=Object(G.b)((function(e){return{profilePage:e.profilePage}}),{addPost:function(){return{type:"ADD-POST"}},onChangePostText:function(e){return{newText:e,type:"ON-CHANGE-POST-TEXT"}}})(Xe),Ze=function(e){return r.a.createElement("div",{className:Ne.a.profile},r.a.createElement(Ue,{profilePage:e.profilePage,updateStatus:e.updateStatus,isOwner:e.isOwner,editMode:e.editMode,userId:e.userId,onChangeEditMode:e.onChangeEditMode,updateUserProfile:e.updateUserProfile,updatePhoto:e.updatePhoto}),r.a.createElement("hr",null),r.a.createElement(Ye,null))},Qe=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1},e.onChangeEditMode=function(t){e.setState({editMode:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.setUserProfile(e),this.props.getStatus(e)}},{key:"componentDidUpdate",value:function(e,t,a){if(this.props.match.params.userId!=e.match.params.userId){var n=this.props.match.params.userId;n||(n=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.setUserProfile(n),this.props.getStatus(n)}}},{key:"render",value:function(){return r.a.createElement(Ze,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,editMode:this.state.editMode,onChangeEditMode:this.onChangeEditMode,userId:this.userId}))}}]),a}(r.a.Component),$e=Object(H.d)(Object(G.b)((function(e){return{profilePage:e.profilePage,authorizedUserId:e.auth.userData.id}}),{setUserProfile:Be,getStatus:function(e){return function(t){le(e).then((function(e){t({type:"SET-STATUS",status:e})}))}},updateStatus:function(e){return function(t){ce(e).then((function(a){0===a.resultCode&&t(function(e){return{type:"UPDATE-STATUS",status:e}}(e))}))}},updateUserProfile:function(e){return function(){var t=Object(Le.a)(Me.a.mark((function t(a,n){var r,o;return Me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userData.id,t.next=3,se(e);case 3:if(0!==(o=t.sent).resultCode){t.next=8;break}a(Be(r)),t.next=10;break;case 8:return a(Object(Re.a)("edit-profile",{_error:o.messages[0]})),t.abrupt("return",Promise.reject(o.messages[0]));case 10:case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},updatePhoto:function(e){return function(t,a){var n=a().auth.userData.id;ue(e).then((function(e){0===e.data.resultCode&&t(Be(n))}))}}}),J,O.f)(Qe),et=a(92),tt=a.n(et),at=a(134),nt=a.n(at),rt=a(135),ot=a.n(rt),it=function(){return r.a.createElement("div",{className:nt.a.logo},r.a.createElement("img",{src:ot.a,alt:""}))},st=a(136),lt=a.n(st),ct=function(){return r.a.createElement("div",{className:lt.a.headerTitle},"Social Network")},ut=function(e){return r.a.createElement("div",{className:tt.a.header},r.a.createElement(it,null),r.a.createElement(ct,null),r.a.createElement("div",{className:tt.a.auth},e.isAuth?r.a.createElement("span",null,e.userData.email," ",r.a.createElement("button",{onClick:e.logout},"Logout")):r.a.createElement(g.b,{to:"/login"},"Login")))},mt={userData:{id:null,login:null,email:null},isAuth:!1,captchaUrl:null},pt=function(e){return{type:"GET_CAPTCHA_URL",captchaUrl:e}},dt=function(e,t){return{type:"SET-USER-DATA",isAuth:t,userData:e}},ft=function(){return function(){var e=Object(Le.a)(Me.a.mark((function e(t){var a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:a=e.sent,t(pt(a.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},gt=function(){return function(e){return ne().then((function(t){0===t.resultCode&&e(dt(t,!0))}))}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":var a=Object(w.a)({},e);return a.userData=Object(w.a)({},e.userData),a.userData.id=t.userData.data.id,a.userData.login=t.userData.data.login,a.userData.email=t.userData.data.email,a.isAuth=t.isAuth,a;case"GET_CAPTCHA_URL":return Object(w.a)({},e,{captchaUrl:t.captchaUrl});default:return e}},Et=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ut,this.props)}}]),a}(r.a.Component),bt=Object(G.b)((function(e){return{isAuth:e.auth.isAuth,userData:e.auth.userData,state:e}}),{logout:function(){return function(){var e=Object(Le.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:0===e.sent.resultCode&&t(dt({data:{id:null,login:null,email:null}},!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Et),vt=T(30),Pt=Object(C.a)({form:"Login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,"login:",r.a.createElement(A.a,{type:"text",component:L,name:"email",validate:[D,vt]})),r.a.createElement("div",null,"password:",r.a.createElement(A.a,{type:"password",component:L,name:"password",validate:[D,vt]})),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement(A.a,{type:"checkbox",component:L,name:"rememberMe"}),"remember me")),e.error&&r.a.createElement("div",{className:F.a.errorForm},e.error),e.captchaUrl&&r.a.createElement("img",{src:e.captchaUrl,alt:""}),e.captchaUrl&&r.a.createElement(A.a,{type:"text",component:L,name:"captcha"}),r.a.createElement("div",null,r.a.createElement("button",null,"click")))})),Ot=Object(G.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return function(){var r=Object(Le.a)(Me.a.mark((function r(o){var i;return Me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,re(e,t,a,n);case 2:0===(i=r.sent).resultCode?o(gt()):10===i.resultCode?(o(ft()),o(Object(Re.a)("Login",{_error:i.messages[0]}))):o(Object(Re.a)("Login",{_error:i.messages[0]}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(O.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"login"),r.a.createElement(Pt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),_t={initializedApp:!1},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED-APP":return Object(w.a)({},e,{initializedApp:!0});default:return e}},St=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.initialized()}},{key:"render",value:function(){return this.props.initializedApp?r.a.createElement(g.a,null,r.a.createElement("div",{className:p.a.App},r.a.createElement(bt,null),r.a.createElement("div",{className:p.a.wrapper},r.a.createElement(P,{stateSidebarPage:this.props.state.sidebarPage}),r.a.createElement("div",{className:p.a.wrapperContent},r.a.createElement(O.b,{path:"/profile/:userId?",render:function(){return r.a.createElement($e,null)}}),r.a.createElement(O.b,{path:"/dialogs",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(O.b,{path:"/users",render:function(){return r.a.createElement(ke,null)}}),r.a.createElement(O.b,{path:"/login",render:function(){return r.a.createElement(Ot,null)}}))))):r.a.createElement(we,null)}}]),a}(r.a.Component),jt=Object(G.b)((function(e){return{initializedApp:e.app.initializedApp}}),{initialized:function(){return function(){var e=Object(Le.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(gt());case 2:t({type:"INITIALIZED-APP"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(St);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var kt={friendsData:[{name:"Vadim",id:1,ava:"https://c7.hotpng.com/preview/549/388/33/shrek-the-third-donkey-princess-fiona-gingerbread-man-t-shirt-shrek.jpg"},{name:"Sveta",id:2,ava:"https://i.pinimg.com/736x/03/a9/c3/03a9c377e1fd89b539ab5cd7539f1f89--tangled-dress-tangled-cosplay.jpg"},{name:"Alex",id:3,ava:"https://vignette.wikia.nocookie.net/tekken/images/0/07/Bob-t6br.jpg/revision/latest?cb=20120810084348&path-prefix=ru"}]},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return e},Nt=a(137),xt=a(126),Ct=Object(H.c)({profilePage:Ge,dialogPage:j,sidebarPage:yt,usersPage:he,auth:ht,app:wt,form:xt.a}),At=Object(H.e)(Ct,Object(H.a)(Nt.a));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G.a,{store:At},r.a.createElement(jt,{state:At.getState()}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,a){e.exports={errorTextarea:"FormControls_errorTextarea__lcxlA",errorInput:"FormControls_errorInput__OSX_r",errorForm:"FormControls_errorForm__qw3pw"}},35:function(e,t,a){e.exports={usersWrapper:"Users_usersWrapper__3RvHg",avaBlock:"Users_avaBlock__19thE",ava:"Users_ava__2S3OP",discriptionBlock:"Users_discriptionBlock__38tQ6",status:"Users_status__3wyXG",selectedPage:"Users_selectedPage__2yD8R"}},36:function(e,t,a){e.exports={profileInfo:"ProfileInfo_profileInfo__XivqY",dopInfo:"ProfileInfo_dopInfo__2kGlb",avatar:"ProfileInfo_avatar__JOBTt",contact:"ProfileInfo_contact__3TIRn",errorForm:"ProfileInfo_errorForm__2HTJS"}},52:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__2Iwm_",activeLink:"Sidebar_activeLink__2KRx_"}},66:function(e,t,a){e.exports={App:"App_App__2j8-R",wrapper:"App_wrapper__3EcuR",wrapperContent:"App_wrapperContent__2Hiau"}},67:function(e,t,a){e.exports={friendsBlock:"Friends_friendsBlock__3hHEF",wrapperFriends:"Friends_wrapperFriends__2D07H",friends:"Friends_friends__3IPsQ"}},85:function(e,t,a){},92:function(e,t,a){e.exports={header:"Header_header__1osAm",auth:"Header_auth__1w2Sz"}}},[[163,1,2]]]);
//# sourceMappingURL=main.bef0de71.chunk.js.map